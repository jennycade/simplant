(this.webpackJsonpsimplant=this.webpackJsonpsimplant||[]).push([[0],{12:function(e,t,r){},13:function(e,t,r){},15:function(e,t,r){"use strict";r.r(t);var n=r(2),o=r.n(n),i=r(6),s=r.n(i),u=(r(12),r(1)),c=r(7),a=function(e){if(void 0===e)throw new Error("Called parseCoord(undefined)");return e.split(",").map((function(e){return parseInt(e)}))},f=function(e,t){return"".concat(e,",").concat(t)},l=function(e,t){var r=e,n=function(){return t.includes("u")},o=function(){return t.includes("d")},i=function(){var r=a(e),i=Object(u.a)(r,2),s=i[0],c=i[1];return n()&&(c-=1),o()&&(c+=1),t.includes("l")&&(s-=1),t.includes("r")&&(s+=1),e=f(s,c)};return{getOrigin:function(){return r},isShoot:n,isRoot:o,grow:function(){return i()}}},d=function(e){var t={bud:{nextVerb:"blossom",minTime:5,nextStage:"flower"},flower:{nextVerb:"fertilize",minTime:5,nextStage:"fertilized flower"},"fertilized flower":{nextVerb:"fruit",minTime:5,nextStage:"fruit"},fruit:{nextVerb:"ripen",minTime:5,nextStage:"ripe fruit"},"ripe fruit":{nextVerb:"disperse",minTime:5,nextStage:"dispersed seeds"},"dispersed seeds":{nextVerb:null,minTime:5,nextStage:null}},r=0,n=Object.keys(t)[0],o=0,i=function(){return t[n].nextVerb},s=function(){var e=t[n].minTime;return r>=e};return{getCoord:function(){return e},getStage:function(){return n},getSeeds:function(){return o},getNextVerb:i,isVerbReady:s,incTime:function(){r++},doVerb:function(e){i()===e&&s()&&(n=t[n].nextStage,r=0),"dispersed seeds"===n&&(o=100)}}},g=function(e,t){var r={},n=[],o=[],i=[],s=[],c=function(e){for(var t=0;t<i.length;t++)if(i[t].getNextVerb()===e&&i[t].isVerbReady())return i[t].doVerb(e),r[i[t].getCoord()]=i[t].getStage(),!0;return!1},g=function(e){var t;"shoot"===e&&(t="isShoot"),"root"===e&&(t="isRoot");for(var o={},i=0;i<n.length;i++)if(n[i][t]()){var s=n[i].grow();Object.keys(r).includes(s)&&(o[s]=e)}return Object.keys(o).length>0&&(Object.assign(r,o),!0)},h=function(e){var i="";"shoot"===e&&(i="u"),"root"===e&&(i="d");var s=Object.keys(r).flatMap((function(n){var o="",s=a(n),c=Object(u.a)(s,2),f=c[0];c[1];if(f===t&&r[n]===e){var l="".concat(n).concat(i);o=[l+"l",l+"r"]}return o})),c=(s=s.filter((function(e){return""!==e}))).filter((function(e){return!o.includes(e)}));if(c.length>0){var f=c[Math.floor(Math.random()*c.length)],d=f.substring(0,f.length-2),g=f.substring(f.length-2),h=l(d,g);return n.push(h),o.push(f),!0}return!1},b=function(){return h("shoot")},v=function(){return h("root")},p=function(){for(var e=[],t=0,n=Object.entries(r);t<n.length;t++){var o=Object(u.a)(n[t],2),c=o[0],a=o[1];s.includes(c)||"shoot"!==a||e.push(c)}var f=e[Math.floor(Math.random()*e.length)];if(f){var l=d(f);return i.push(l),r[f]=l.getStage(),s.push(f),l}return!1};return{coords:r,getCoords:function(){return r},setCoords:function(e){for(var t=0;t<e.length;t++)r[e[t]]=""},sprout:function(){var t=l(e.shoot,"u"),o=l(e.root,"d");return n=[t,o],r[e.shoot]="shoot",r[e.root]="root",!0},containsShoot:function(e){return"shoot"===r[e]},containsRoot:function(e){return"root"===r[e]},doVerb:function(e){return{growShoots:function(){return g("shoot")},growRoots:function(){return g("root")},newShoot:b,newRoot:v,bloom:p,blossom:function(){return c("blossom")},fertilize:function(){return c("fertilize")},fruit:function(){return c("fruit")},ripen:function(){return c("ripen")},disperse:function(){return c("disperse")}}[e]()},getFlowerVerbs:function(){for(var e=[],t=[],r=0;r<i.length;r++){var n=i[r].getNextVerb();!e.includes(n)&&n&&e.push(n),i[r].isVerbReady()&&!t.includes(n)&&n&&t.push(n)}return[e,t]},growShoots:function(){return g("shoot")},growRoots:function(){return g("root")},newShoot:b,newRoot:v,bloom:p,tick:function(){for(var e=0;e<i.length;e++)i[e].incTime()},getSeeds:function(){for(var e=0,t=0;t<i.length;t++)e+=i[t].getSeeds();return e},countCells:function(e){for(var t=0,n=0,o=0,i=["bud","flower","fertilized flower","fruit","ripe fruit","dispersed seeds"],s=0,c=Object.entries(r);s<c.length;s++){var a=Object(u.a)(c[s],2),f=(a[0],a[1]);"shoot"===f&&t++,"root"===f&&n++,i.includes(f)&&o++}return"shoot"===e?t:"root"===e?n:"flower"===e?o:t+n+o},toString:function(){for(var e={shoot:"s",root:"r",bud:"1",flower:"2","fertilized flower":"3",fruit:"4","ripe fruit":"5","dispersed seeds":"6"},t="",n=Object.keys(r),o=n[n.length-1],i=a(o),s=Object(u.a)(i,2),c=s[0],l=s[1],d=0;d<l+1;d++){for(var g=0;g<c+1;g++){var h=r[f(g,d)];t+=""===h?"-":e[h]}t+="\n"}return t}}},h=function(e,t){var r=[],n=t[0],o=t[t.length-1],i=a(n),s=Object(u.a)(i,2),c=s[0],l=s[1],d=a(o),g=Object(u.a)(d,2),h=g[0],b=g[1],v=Math.floor(Math.random()*(h+1)),p="sun"===e?0:b;r.push(f(v,p));var j=function(e){for(var t=!0,r=0;r<e.length;r++){var n=a(e[r]),o=Object(u.a)(n,2),i=o[0];o[1];(i<c||i>h)&&(t=!1)}return t};return{move:function(){var t,n,o,i=[-1,0,1];do{"sun"===e&&(t=0,n=1),"water"===e&&(t=i[Math.floor(Math.random()*i.length)],n=-1),o=[];for(var s=0;s<r.length;s++){var c=a(r[s]),l=Object(u.a)(c,2),d=l[0],g=l[1],h=f(d+t,g+n);o.push(h)}}while(!j(o));return r=o,o},areCoordsLegal:function(){for(var e=0;e<r.length;e++){var t=a(r[e]),n=Object(u.a)(t,2),o=n[0],i=n[1];if(o<c||o>h||i<l||i>b)return!1}return!0},getCoords:function(){return r},getType:function(){return e}}},b=function(){var e,t,r=[],n="",o=null,i=[],s={shoot:"",root:""},c=[],l=[],d=function(e){return a(e)[1]<t?"air":"soil"},b=function(){var e;o&&(e=o.getCoords());for(var t={},n=0;n<i.length;n++)for(var s=i[n].getCoords(),u=i[n].getType(),c=0;c<s.length;c++)t[s[c]]=u;for(var a={},f=0;f<r.length;f++){var l=r[f];a[l]={},a[l].environment=d(l),e&&(a[l].plant=e[l]),t[l]&&(a[l].resource=t[l])}return a};return{createGrid:function(o,i){r=[];for(var d=0;d<i;d++)for(var g=0;g<o;g++){var h="".concat(g,",").concat(d);r.push(h)}return n="".concat(o-1,",").concat(i-1),function(){var e=a(n),r=Object(u.a)(e,2),o=r[0],i=r[1],c=Math.floor(o/2),l=Math.floor(i/2),d=l+1;s.shoot=f(c,l),s.root=f(c,d),t=d}(),function(){for(var e=0;e<r.length;e++)a(r[e])[1]<t?c.push(r[e]):l.push(r[e])}(),function(){var t=a(n)[0];e=Math.floor(t/2)}(),r},createPlant:function(){return(o=g(s,e)).setCoords(r),o.sprout(),o},createSun:function(){var e=h("sun",c);i.push(e)},createWater:function(){var e=h("water",l);i.push(e)},getMaxCoord:function(){return n},getMidpoint:function(e){return s[e]},getMidline:function(){return e},getAbiotic:d,getResources:function(){return i},harvestResource:function(e){i=i.filter((function(t){return!t.getCoords().includes(e)}))},tick:function(){for(var e=[],t=0;t<i.length;t++)i[t].move(),i[t].areCoordsLegal()||e.push(i[t]);i=i.filter((function(t){return!e.includes(t)})),null!==o&&o.tick()},toString:function(){var e=b(),t={air:" ",soil:".",shoot:"s",root:"r",bud:"1",flower:"2","fertilized flower":"3",fruit:"4","ripe fruit":"5","dispersed seeds":"6",sun:"p",water:"w"};return r.map((function(r){var o=e[r],i="";return i=t[o.environment],o.plant&&""!==o.plant&&(i=t[o.plant]),o.resource&&(i=t[o.resource]),a(r)[0]===a(n)[0]&&(i+="\n"),i})).join("")},getMap:function(){return b()},doVerb:function(e){return o.doVerb(e)},getSeeds:function(){return o.getSeeds()},getPlant:function(){return o},getFlowerVerbs:function(){return!!o&&o.getFlowerVerbs()},getCoords:function(){return r}}},v=function(){var e,t={},r={},n=0,o=0,i=0,s=[{verb:"growShoots",cost:20,area:"shoot"},{verb:"growRoots",cost:20,area:"root"},{verb:"newShoot",cost:10,area:"shoot"},{verb:"newRoot",cost:10,area:"root"},{verb:"bloom",cost:10,area:"shoot"},{verb:"blossom",cost:20,area:"flower"},{verb:"fertilize",cost:20,area:"flower"},{verb:"fruit",cost:50,area:"flower"},{verb:"ripen",cost:30,area:"flower"},{verb:"disperse",cost:10,area:"flower"}];return{init:function(o,i){(e=b()).createGrid(o,i),e.createPlant(),r=e.getCoords(),t=e.getMap(),n=100},doVerb:function(r){var i=s.filter((function(e){return e.verb===r}))[0].cost;if(i>n)throw new Error("Not enough energy");var u=e.doVerb(r);if(!u)throw new Error("Cannot ".concat(r));return n-=i,t=e.getMap(),o=e.getSeeds(),u},harvestResource:function(r){e.harvestResource(r),n+=25,t=e.getMap()},tick:function(){0===Math.floor(3*Math.random())&&function(){var t=["createWater","createSun"],r=t[Math.floor(Math.random()*t.length)];e[r]()}(),e.tick(),t=e.getMap(),i++},getReadyVerbs:function(){var t=["growShoots","growRoots","newShoot","newRoot","bloom"],r=e.getFlowerVerbs()[1];return t=[].concat(Object(c.a)(t),[r]).flat(),s.filter((function(e){return t.includes(e.verb)}))},getMap:function(){return t},getEnergy:function(){return n},getCoords:function(){return r},getSeeds:function(){return o},getTime:function(){return i}}},p=(r(13),r(0)),j=function(){var e=Object(n.useState)("new"),t=Object(u.a)(e,2),r=t[0],o=t[1],i=Object(n.useState)({}),s=Object(u.a)(i,2),c=s[0],a=s[1],f=Object(n.useState)({}),l=Object(u.a)(f,2),d=l[0],g=l[1],h=Object(n.useState)(0),b=Object(u.a)(h,2),j=b[0],m=b[1],w=Object(n.useState)(0),O=Object(u.a)(w,2),x=O[0],S=O[1],y=Object(n.useState)(0),M=Object(u.a)(y,2),V=M[0],C=M[1],R=Object(n.useState)(0),k=Object(u.a)(R,2),N=k[0],T=k[1],z=Object(n.useState)([]),E=Object(u.a)(z,2),I=E[0],P=E[1],A=function(){V&&clearInterval(V),o("play");var e=v();e.init(10,10),a(e),g(e.getMap()),m(e.getEnergy()),T(e.getSeeds()),P(e.getReadyVerbs()),C(setInterval((function(){return F(e)}),2e3))},F=function(e){e.tick(),e.getTime()>200?G():(g(e.getMap()),S(e.getTime()),P(e.getReadyVerbs()))},G=function(){V&&clearInterval(V),o("end")},W=Object(p.jsxs)("div",{className:"instructions",children:[Object(p.jsx)("p",{children:"Welcome to Pixel Plant!"}),Object(p.jsx)("p",{children:"It's spring, and your pixel plant seed has just sprouted."}),Object(p.jsx)("p",{children:"As a plant, you need to soak up sunlight from your shoots and water from your roots to store \u26a1\ufe0f energy in the form of sugar."}),Object(p.jsx)("p",{children:"Use stored \u26a1\ufe0f energy to grow, bloom new \ud83c\udf38 flowers, and make those flowers form \ud83c\udf53 fruits and disperse \ud83c\udf30 seeds."}),Object(p.jsx)("p",{children:"How many \ud83c\udf30 seeds can you disperse before the end of the growing season in 200 days?"}),Object(p.jsx)("button",{onClick:function(){o("play"),C(setInterval((function(){return F(c)}),2e3))},children:"Start growing"})]});return"new"===r||0===Object.keys(c).length?Object(p.jsx)("div",{className:"App",children:Object(p.jsx)("button",{onClick:A,children:"New Game"})}):Object(p.jsxs)("div",{className:"App",children:[Object(p.jsxs)("div",{className:"infobar",children:[Object(p.jsx)("p",{children:"PixelPlant"}),Object(p.jsx)("button",{onClick:function(){V&&clearInterval(V),o("instructions")},children:"\u2139\ufe0f Instructions"}),Object(p.jsxs)("div",{className:"energy",children:["Energy: \u26a1\ufe0f",j]}),Object(p.jsxs)("div",{className:"time",children:["Day: \ud83d\udd51 ",x," / ",200]}),Object(p.jsxs)("div",{className:"seeds",children:["Seeds: \ud83c\udf30 ",N]})]}),function(){var e=c.getCoords().map((function(e){var t=d[e].environment,r=".",n=!1;return d[e].plant&&(t=d[e].plant),["flower","fertilized flower"].includes(d[e].plant)&&(r="\ud83c\udf38"),["fruit","ripe fruit"].includes(d[e].plant)&&(r="\ud83c\udf53"),d[e].resource&&("sun"===d[e].resource?(r="\u2600\ufe0f","shoot"===d[e].plant&&(n=!0)):"water"===d[e].resource&&(r="\ud83d\udca7","root"===d[e].plant&&(n=!0))),Object(p.jsxs)("div",{className:t,onClick:n?function(){return function(e){c.harvestResource(e),g(c.getMap()),m(c.getEnergy()),console.log("Harvested resource")}(e)}:void 0,children:[" ",r," "]},e)}));return Object(p.jsx)("div",{className:"habitat",children:e})}(),"play"===r?Object(p.jsx)("div",{className:"actions",children:I.map((function(e){return Object(p.jsxs)("button",{onClick:function(){return function(e){try{c.doVerb(e)}catch(t){console.error(t)}g(c.getMap()),P(c.getReadyVerbs()),m(c.getEnergy()),T(c.getSeeds())}(e.verb)},children:[e.verb," \u26a1\ufe0f",e.cost]},e.verb)}))}):"instructions"===r?W:Object(p.jsxs)("p",{className:"end",children:["The growing season is over. Your plant dispersed ",N," \ud83c\udf30 seeds this season.",Object(p.jsx)("button",{onClick:A,children:"New Game"})]})]})};s.a.render(Object(p.jsx)(o.a.StrictMode,{children:Object(p.jsx)(j,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.d2f40044.chunk.js.map